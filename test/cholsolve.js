var m = require('..');

exports.sample = function(test){

    // Test data generated from Octave:
    //
    // M = randn(3);
    // [U,ignore] = eig((M+M')/2);
    // A = U*diag(abs(randn(3,1)))*U';
    // b=ones(3,1);
    //
    //A =
    //   0.641658884659564  -0.419572889725110  -0.190293021119217
    //  -0.419572889725110   0.996099818824769  -0.272012537217569
    //  -0.190293021119217  -0.272012537217569   1.128980962077152
    //
    //b =
    //
    //   1
    //   1
    //   1
    //
    //x =
    //
    //   4.74838461814586
    //   3.70844252823201
    //   2.57960710895841
    //
    var A = m.create(3,3,{
        data: [  0.641658884659564,  -0.419572889725110,  -0.190293021119217,
                -0.419572889725110,   0.996099818824769,  -0.272012537217569,
                -0.190293021119217,  -0.272012537217569,   1.128980962077152  ],
    });
    b = m.ones(m.create(3,1));
    var x = m.cholsolve(A,b,3);

    var sol = [ 4.74838461814586,
                3.70844252823201,
                2.57960710895841 ];

    // Check for equality
    for(var i=0; i<sol.length; i++){
        test.ok(Math.abs(sol[i]-x[i]) < 0.001);
    }

    test.done();
};
